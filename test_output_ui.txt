
> synthetic-sagan@4.1.0 test:unit
> vitest --run src/features/franchise/FinancialControlCenter.test.tsx


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/Usuario/.gemini/antigravity/playground/repaart[39m

[90mstdout[2m | src/features/franchise/FinancialControlCenter.test.tsx[2m > [22m[2mFinancialControlCenter[2m > [22m[2mrenders loading state initially
[22m[39m[FinancialControlCenter] Calculating YTD for 2023 up to month index 9
[FinancialControlCenter] Total Previous YTD: 0

stderr | src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > renders loading state initially
An update to FinancialControlCenter inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to FinancialControlCenter inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | src/features/franchise/FinancialControlCenter.test.tsx[2m > [22m[2mFinancialControlCenter[2m > [22m[2mrenders content after loading
[22m[39m[FinancialControlCenter] Calculating YTD for 2023 up to month index 9
[FinancialControlCenter] Total Previous YTD: 0

stderr | src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > renders content after loading
An error occurred in the <FinancialControlCenter> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


[90mstdout[2m | src/features/franchise/FinancialControlCenter.test.tsx[2m > [22m[2mFinancialControlCenter[2m > [22m[2mswitches steps correctly
[22m[39m[FinancialControlCenter] Calculating YTD for 2023 up to month index 9
[FinancialControlCenter] Total Previous YTD: 0

stderr | src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > switches steps correctly
An error occurred in the <FinancialControlCenter> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


[90mstdout[2m | src/features/franchise/FinancialControlCenter.test.tsx[2m > [22m[2mFinancialControlCenter[2m > [22m[2mhandles save action
[22m[39m[FinancialControlCenter] Calculating YTD for 2023 up to month index 9
[FinancialControlCenter] Total Previous YTD: 0

stderr | src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > handles save action
An error occurred in the <FinancialControlCenter> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 [31mÃ”Ã˜Â»[39m src/features/franchise/FinancialControlCenter.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 2075[2mms[22m[39m
     [32mÃ”Â£Ã´[39m renders loading state initially[32m 25[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m renders content after loading[39m[32m 30[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m switches steps correctly[39m[33m 1007[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m handles save action[39m[33m 1012[2mms[22m[39m

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Failed Tests 3 Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

 FAIL  src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > renders content after loading
TestingLibraryElementError: Unable to find an element with the text: Cierre Financiero. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Ã”Ã˜Â» Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 Ã”Ã˜Â» node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 Ã”Ã˜Â» node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 Ã”Ã˜Â» node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 Ã”Ã˜Â» src/features/franchise/FinancialControlCenter.test.tsx:76:23
     74|         });
     75| 
     76|         expect(screen.getByText('Cierre Financiero')).toBeInTheDocumenÃ”Ã‡Âª
       |                       ^
     77|         expect(screen.getByText('PERIODO: 2023-10')).toBeInTheDocumentÃ”Ã‡Âª
     78|         expect(screen.getByTestId('revenue-step')).toBeInTheDocument();

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[1/3]Ã”Ã„Â»

 FAIL  src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > switches steps correctly
TestingLibraryElementError: Unable to find an element by: [data-testid="revenue-step"]

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<html>
  <head />
  <body>
    <div />
  </body>
</html>
 Ã”Ã˜Â» Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Ã”Ã˜Â» src/features/franchise/FinancialControlCenter.test.tsx:84:15
     82|         render(<FinancialControlCenter franchiseId="f1" month="2023-10Ã”Ã‡Âª
     83| 
     84|         await waitFor(() => {
       |               ^
     85|             expect(screen.getByTestId('revenue-step')).toBeInTheDocumeÃ”Ã‡Âª
     86|         });

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[2/3]Ã”Ã„Â»

 FAIL  src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > handles save action
TestingLibraryElementError: Unable to find an element with the text: Cierre Financiero. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<html>
  <head />
  <body>
    <div />
  </body>
</html>
 Ã”Ã˜Â» Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Ã”Ã˜Â» src/features/franchise/FinancialControlCenter.test.tsx:97:15
     95|         render(<FinancialControlCenter franchiseId="f1" month="2023-10Ã”Ã‡Âª
     96| 
     97|         await waitFor(() => expect(screen.getByText('Cierre FinancieroÃ”Ã‡Âª
       |               ^
     98| 
     99|         // Go to step 2 to see the save button (conceptually)

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[3/3]Ã”Ã„Â»

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Unhandled Errors Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

Vitest caught 3 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Uncaught Exception Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: [vitest] No "Activity" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("lucide-react"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 Ã”Ã˜Â» VitestMocker.createError node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17
 Ã”Ã˜Â» Object.get node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16
 Ã”Ã˜Â» FinancialControlCenter src/features/franchise/FinancialControlCenter.tsx:344:30
    342|                     <div className="flex items-center gap-3">
    343|                         <div className="p-1.5 bg-gradient-to-br from-iÃ”Ã‡Âª
    344|                             <Activity className="w-4 h-4" strokeWidth=Ã”Ã‡Âª
       |                              ^
    345|                         </div>
    346|                         <div>
 Ã”Ã˜Â» Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Ã”Ã˜Â» renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Ã”Ã˜Â» updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Ã”Ã˜Â» beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Ã”Ã˜Â» runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Ã”Ã˜Â» performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Ã”Ã˜Â» workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

This error originated in "src/features/franchise/FinancialControlCenter.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "renders content after loading". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Uncaught Exception Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: [vitest] No "Activity" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("lucide-react"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 Ã”Ã˜Â» VitestMocker.createError node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17
 Ã”Ã˜Â» Object.get node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16
 Ã”Ã˜Â» FinancialControlCenter src/features/franchise/FinancialControlCenter.tsx:344:30
    342|                     <div className="flex items-center gap-3">
    343|                         <div className="p-1.5 bg-gradient-to-br from-iÃ”Ã‡Âª
    344|                             <Activity className="w-4 h-4" strokeWidth=Ã”Ã‡Âª
       |                              ^
    345|                         </div>
    346|                         <div>
 Ã”Ã˜Â» Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Ã”Ã˜Â» renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Ã”Ã˜Â» updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Ã”Ã˜Â» beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Ã”Ã˜Â» runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Ã”Ã˜Â» performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Ã”Ã˜Â» workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

This error originated in "src/features/franchise/FinancialControlCenter.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "switches steps correctly". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Uncaught Exception Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: [vitest] No "Activity" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("lucide-react"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 Ã”Ã˜Â» VitestMocker.createError node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17
 Ã”Ã˜Â» Object.get node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16
 Ã”Ã˜Â» FinancialControlCenter src/features/franchise/FinancialControlCenter.tsx:344:30
    342|                     <div className="flex items-center gap-3">
    343|                         <div className="p-1.5 bg-gradient-to-br from-iÃ”Ã‡Âª
    344|                             <Activity className="w-4 h-4" strokeWidth=Ã”Ã‡Âª
       |                              ^
    345|                         </div>
    346|                         <div>
 Ã”Ã˜Â» Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Ã”Ã˜Â» renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Ã”Ã˜Â» updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Ã”Ã˜Â» beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Ã”Ã˜Â» runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Ã”Ã˜Â» performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Ã”Ã˜Â» workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

This error originated in "src/features/franchise/FinancialControlCenter.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "handles save action". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[2m     Errors [22m [1m[31m3 errors[39m[22m
[2m   Start at [22m 10:12:30
[2m   Duration [22m 3.78s[2m (transform 169ms, setup 135ms, import 513ms, tests 2.08s, environment 845ms)[22m

