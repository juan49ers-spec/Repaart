# ğŸ§ª GuÃ­a de Prueba - Sistema de Quizzes Academia

## ğŸ¯ Objetivo

Probar el flujo completo del sistema de quizzes desde la creaciÃ³n hasta la aprobaciÃ³n.

---

## ğŸ“‹ Flujo de Prueba Completo

### **PARTE 1: Admin Crea el Quiz** (5-10 min)

#### **Paso 1.1: Acceder al Panel de Admin**

1. **Recarga la pÃ¡gina** (`F5`)
2. Inicia sesiÃ³n como **admin** (`hola@repaart.es` o `admin@repaart.com`)
3. Haz clic en el tab **"Academia"** (ğŸ“) en la barra inferior
4. DeberÃ­as ver el panel de administraciÃ³n

#### **Paso 1.2:Crear/Seleccionar un MÃ³dulo**

- **OpciÃ³n A** - Si no tienes mÃ³dulos:
  1. Haz clic en **"Crear MÃ³dulo de Ejemplo"**
  2. Espera a que se cree (3 lecciones incluidas)
  
- **OpciÃ³n B** - Si ya tienes mÃ³dulos:
  1. Usa cualquier mÃ³dulo existente

#### **Paso 1.3: Crear Lecciones (si no las tiene)**

1. En el mÃ³dulo, haz clic en el icono **ğŸ“„ (Gestionar Lecciones)** (morado/indigo)
2. Si no hay lecciones, crea al menos 2:
   - Haz clic en "+ Nueva LecciÃ³n"
   - **LecciÃ³n 1:**
     - TÃ­tulo: "IntroducciÃ³n"
     - Contenido: "# Bienvenido\n\nEste es el contenido de la lecciÃ³n..."
   - **LecciÃ³n 2:**
     - TÃ­tulo: "Conceptos Clave"
     - Contenido: "# Conceptos\n\n- Concepto 1\n- Concepto 2"
3. Click "Volver" para regresar al panel

#### **Paso 1.4: Crear el Quiz** â­

1. En el mismo mÃ³dulo, haz clic en el icono **ğŸ“‹ (Gestionar Quiz)** (morado)
2 DeberÃ­as ver el "Editor de Quiz"
3. **Crear Pregunta 1:**
   - Pregunta: "Â¿CuÃ¡l es la capital de EspaÃ±a?"
   - OpciÃ³n A: "Madrid" â† **Marca el cÃ­rculo (respuesta correcta)**
   - OpciÃ³n B: "Barcelona"
   - OpciÃ³n C: "Sevilla"
   - OpciÃ³n D: "Valencia"
   - Click "+ Agregar Pregunta"

4. **Crear Pregunta 2:**
   - Pregunta: "Â¿CuÃ¡nto es 2 + 2?"
   - OpciÃ³n A: "3"
   - OpciÃ³n B: "4" â† **Marca el cÃ­rculo (respuesta correcta)**
   - OpciÃ³n C: "5"
   - OpciÃ³n D: "6"
   - Click "+ Agregar Pregunta"

5. **Crear Pregunta 3:**
   - Pregunta: "Â¿CuÃ¡l es el color del cielo?"
   - OpciÃ³n A: "Rojo"
   - OpciÃ³n B: "Verde"
   - OpciÃ³n C: "Azul" â† **Marca el cÃ­rculo (respuesta correcta)**
   - OpciÃ³n D: "Amarillo"
   - Click "+ Agregar Pregunta"

6. **Guardar el Quiz:**
   - Haz clic en **"Guardar Quiz"** (botÃ³n verde arriba a la derecha)
   - VerÃ¡s un mensaje: "âœ… Quiz guardado con Ã©xito"

7. **Verificar:**
   - DeberÃ­as ver las 3 preguntas listadas abajo
   - Cada una muestra la pregunta y las opciones
   - La respuesta correcta tiene un borde verde

8. Click "â† Volver" para regresar al panel de admin

**âœ… Admin completado - El quiz estÃ¡ listo**

---

### **PARTE 2: Estudiante Toma el Quiz** (5-10 min)

#### **Paso 2.1: Cambiar a Vista Estudiante**

1. En el panel de admin, haz clic en el botÃ³n **"ğŸ‘ï¸ Ver como Estudiante"**
2. DeberÃ­as ver el dashboard de estudiante con los mÃ³dulos

#### **Paso 2.2: Abrir el MÃ³dulo**

1. Haz clic en el mÃ³dulo que tiene el quiz
2. DeberÃ­as ver el visor de lecciones

#### **Paso 2.3: Completar las Lecciones**

1. **LecciÃ³n 1:**
   - Lee el contenido
   - Haz clic en **"Marcar como completada"** (botÃ³n verde)
   - AutomÃ¡ticamente avanza a la siguiente

2. **LecciÃ³n 2:**
   - Lee el contenido
   - Haz clic en **"Marcar como completada"**

3. **Verificar progreso:**
   - La barra de progreso arriba debe mostrar **100%**

#### **Paso 2.4: Tomar el Quiz** â­â­â­

**Â¡Momento crÃ­tico! El quiz deberÃ­a aparecer automÃ¡tic amente**

1. **VerÃ¡s la primera pregunta del quiz:**
   - TÃ­tulo: "Â¿CuÃ¡l es la capital de EspaÃ±a?"
   - 4 opciones con cÃ­rculos
   - Barra de progreso "Pregunta 1 de 3"

2. **Responder Pregunta 1:**
   - Haz clic en "Madrid" (opciÃ³n A)
   - El botÃ³n se pone azul cuando estÃ¡ seleccionado
   - Haz clic en **"Siguiente â†’"**

3. **Responder Pregunta 2:**
   - Haz clic en "4" (opciÃ³n B)
   - Haz clic en **"Siguiente â†’"**

4. **Responder Pregunta 3:**
   - Haz clic en "Azul" (opciÃ³n C)
   - El botÃ³n cambia a **"ğŸ† Finalizar Quiz"**
   - Haz clic en **"Finalizar Quiz"**

5. **Ver Resultados:**
   - ğŸ‰ VerÃ¡s una pantalla de resultados
   - **PuntuaciÃ³n: 100%** (3 de 3 correctas)
   - Pantalla verde con "Â¡Felicidades!"
   - Mensaje: "Has completado el mÃ³dulo con Ã©xito"

6. **Desglose de Respuestas:**
   - Pregunta 1: âœ… Madrid - Correcta
   - Pregunta 2: âœ… 4 - Correcta
   - Pregunta 3: âœ… Azul - Correcta

7. **Resultado:**
   - Mensaje: "âœ… Progreso guardado - Siguiente mÃ³dulo desbloqueado"
   - AutomÃ¡ticamente vuelve al dashboard despuÃ©s de 3 segundos

**âœ… Estudiante completado - Quiz aprobado con Ã©xito**

---

### **PARTE 3: Probar Escenario de Fallo** (Opcional)

#### **Repetir el quiz y fallar a propÃ³sito:**

1. Vuelve al mismo mÃ³dulo (si puedes)
2. Si el quiz aparece de nuevo:
   - Responde **mal** al menos 1 pregunta
   - Ejemplo: En pregunta 1, selecciona "Barcelona" en vez de "Madrid"
   - Completa las otras correctamente

3. **Ver Resultados de Fallo:**
   - ğŸ˜ Pantalla roja "No Aprobado"
   - **PuntuaciÃ³n: 66%** (2 de 3 correctas)
   - Mensaje: "Necesitas al menos 80% para aprobar"

4. **Desglose:**
   - Pregunta 1: âŒ Barcelona - Incorrecta
     - Tu respuesta: Barcelona
     - Correcta: Madrid
   - Pregunta 2: âœ… 4 - Correcta
   - Pregunta 3: âœ… Azul - Correcta

5. **Opciones:**
   - BotÃ³n **"ğŸ”„ Reintentar"** para volver a intentar
   - Si haces clic, vuelves a la pregunta 1

**âœ… Escenario de fallo verificado**

---

## ğŸ› Â¿QuÃ© Verificar Durante la Prueba?

### **Checklist de Funcionalidad:**

#### **Admin Quiz Editor:**

- [ ] BotÃ³n "Gestionar Quiz" aparece en cada mÃ³dulo
- [ ] Se abre el QuizEditor correctamente
- [ ] Puedes agregar preguntas
- [ ] Puedes marcar la respuesta correcta
- [ ] El botÃ³n "Guardar Quiz" funciona
- [ ] Las preguntas se muestran despuÃ©s de guardar
- [ ] El botÃ³n "Volver" regresa al panel

#### **Estudiante - Lecciones:**

- [ ] Las lecciones se muestran correctamente
- [ ] BotÃ³n "Marcar como completada" funciona
- [ ] La barra de progreso se actualiza
- [ ] Auto-avanza a la siguiente lecciÃ³n

#### **Estudiante - Quiz:**

- [ ] El quiz aparece automÃ¡ticamente al completar todas las lecciones
- [ ] Se muestra la primera pregunta
- [ ] Barra de progreso funciona ("Pregunta X de Y")
- [ ] Puedes seleccionar opciones (cÃ­rculo se marca)
- [ ] BotÃ³n "Siguiente" avanza a la siguiente pregunta
- [ ] La Ãºltima pregunta muestra "Finalizar Quiz"

#### **Resultados:**

- [ ] Pantalla verde si aprobÃ³ (â‰¥80%)
- [ ] Pantalla roja si reprobÃ³ (<80%)
- [ ] PuntuaciÃ³n correcta se muestra
- [ ] Desglose pregunta por pregunta aparece
- [ ] Respuestas correctas/incorrectas marcadas
- [ ] Se muestra tu respuesta vs la correcta
- [ ] BotÃ³n "Reintentar" aparece si reprobÃ³
- [ ] Vuelve al dashboard si aprobÃ³

#### **Firestore:**

- [ ] Quiz se guarda en `academy_quizzes`
- [ ] Resultado se guarda en `quiz_results`
- [ ] Progreso se actualiza en `academy_progress`

---

## â— Problemas Comunes y Soluciones

### **Problema 1: No veo el botÃ³n "Gestionar Quiz"**

**SoluciÃ³n:**

- Recarga la pÃ¡gina (`F5`)
- Verifica que eres admin
- Verifica que el icono ğŸ“‹ (ClipboardCheck) aparece junto a ğŸ“„ y âœï¸

### **Problema 2: El quiz no aparece despuÃ©s de completar lecciones**

**SoluciÃ³n:**

- Verifica que creaste el quiz desde el admin
- Verifica en Firestore que existe en `academy_quizzes` con el `moduleId` correcto
- Abre la consola del navegador (F12) y busca errores

### **Problema 3: Error al guardar el quiz**

**SoluciÃ³n:**

- Verifica que todas las preguntas tienen 4 opciones completas
- Verifica que marcaste una respuesta correcta
- Revisa los permisos de Firestore
- Mira la consola del navegador para errores especÃ­ficos

### **Problema 4: La puntuaciÃ³n no es correcta**

**SoluciÃ³n:**

- Verifica que selected la respuesta correcta al crear el quiz
- Verifica el `correctAnswer` index (0=A, 1=B, 2=C, 3=D)
- Revisa la consola del navegador

### **Problema 5: No vuelve al dashboard despuÃ©s de aprobar**

**SoluciÃ³n:**

- Espera 3 segundos (hay un timeout)
- Si no funciona, haz clic en "â† Volver" manualmente

---

## ğŸ“Š Datos Esperados en Firestore

### **ColecciÃ³n: academy_quizzes**

```javascript
{
  moduleId: "abc123",
  title: "EvaluaciÃ³n: Nombre del MÃ³dulo",
  passingScore: 80,
  questions: [
    {
      question: "Â¿CuÃ¡l es la capital de EspaÃ±a?",
      options: ["Madrid", "Barcelona", "Sevilla", "Valencia"],
      correctAnswer: 0
    },
    // ... mÃ¡s preguntas
  ],
  createdAt: "2025-12-18T19:00:00.000Z"
}
```

### **ColecciÃ³n: quiz_results**

```javascript
{
  userId: "user_123",
  moduleId: "abc123",
  score: 100,
  answers: {
    0: 0,  // Pregunta 0, respondiÃ³ opciÃ³n 0
    1: 1,  // Pregunta 1, respondiÃ³ opciÃ³n 1
    2: 2   // Pregunta 2, respondiÃ³ opciÃ³n 2
  },
  completedAt: "2025-12-18T19:05:00.000Z"
}
```

### **Collection: academy_progress (Actualizado)**

```javascript
{
  userId: "user_123",
  moduleId: "abc123",
  score: 100,
  completed: true,        // true porque score >= 80
  quizCompleted: true,
  completedAt: "2025-12-18T19:05:00.000Z",
  completedLessons: 2,
  // ... otros campos
}
```

---

## âœ… Resultado Esperado Final

Al completar esta prueba exitosamente:

1. âœ… Admin puede crear quizzes visualmente
2. âœ… Estudiante ve el quiz despuÃ©s de completar lecciones
3. âœ… Sistema calcula puntuaciÃ³n correctamente
4. âœ… Feedback inmediato con respuestas correctas
5. âœ… Progreso se guarda en Firestore
6. âœ… Siguiente mÃ³dulo se desbloquea al aprobar
7. âœ… OpciÃ³n de reintentar si no aprueba

---

## ğŸ¥ GrabaciÃ³n de Video (Opcional)

Si quieres documentar el flujo completo, graba la pantalla mientras pruebas:

1. Windows: `Win + G` (Xbox Game Bar)
2. Grabar el flujo completo de 5-10 minutos
3. Ãštil para:
   - DocumentaciÃ³n interna
   - CapacitaciÃ³n de usuarios
   - Debugging futuro

---

**Â¡Listo para probar! Recarga la pÃ¡gina y comienza con el Paso 1.1** ğŸš€
