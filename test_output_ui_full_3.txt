
> synthetic-sagan@4.1.0 test:unit
> vitest --run src/features/franchise/FinancialControlCenter.test.tsx


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/Usuario/.gemini/antigravity/playground/repaart[39m

[90mstdout[2m | src/features/franchise/FinancialControlCenter.test.tsx[2m > [22m[2mFinancialControlCenter[2m > [22m[2mrenders loading state initially
[22m[39m[FinancialControlCenter] Calculating YTD for 2023 up to month index 9
[FinancialControlCenter] Total Previous YTD: 0

stderr | src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > renders loading state initially
An update to FinancialControlCenter inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to FinancialControlCenter inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | src/features/franchise/FinancialControlCenter.test.tsx[2m > [22m[2mFinancialControlCenter[2m > [22m[2mrenders content after loading
[22m[39m[FinancialControlCenter] Calculating YTD for 2023 up to month index 9
[FinancialControlCenter] Total Previous YTD: 0

[90mstdout[2m | src/features/franchise/FinancialControlCenter.test.tsx[2m > [22m[2mFinancialControlCenter[2m > [22m[2mswitches steps correctly
[22m[39m[FinancialControlCenter] Calculating YTD for 2023 up to month index 9
[FinancialControlCenter] Total Previous YTD: 0

 [31mÃ”Ã˜Â»[39m src/features/franchise/FinancialControlCenter.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 67[2mms[22m[39m
     [32mÃ”Â£Ã´[39m renders loading state initially[32m 27[2mms[22m[39m
     [32mÃ”Â£Ã´[39m renders content after loading[32m 23[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m switches steps correctly[39m[32m 16[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m handles save action[39m[32m 1[2mms[22m[39m

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Failed Tests 2 Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

 FAIL  src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > switches steps correctly
ReferenceError: fireEvent is not defined
 Ã”Ã˜Â» src/features/franchise/FinancialControlCenter.test.tsx:109:9
    107| 
    108|         const nextButton = screen.getByText(/Siguiente: Gastos/i);
    109|         fireEvent.click(nextButton);
       |         ^
    110| 
    111|         expect(screen.getByTestId('expenses-step')).toBeInTheDocument(Ã”Ã‡Âª

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[1/2]Ã”Ã„Â»

 FAIL  src/features/franchise/FinancialControlCenter.test.tsx > FinancialControlCenter > handles save action
ReferenceError: mockOnSave is not defined
 Ã”Ã˜Â» src/features/franchise/FinancialControlCenter.test.tsx:115:103
    113| 
    114|     it('handles save action', async () => {
    115|         render(<FinancialControlCenter franchiseId="f1" month="2023-10Ã”Ã‡Âª
       |                                                                                                       ^
    116| 
    117|         await waitFor(() => expect(screen.getByText('Cierre FinancieroÃ”Ã‡Âª

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[2/2]Ã”Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (4)[39m
[2m   Start at [22m 10:19:31
[2m   Duration [22m 1.60s[2m (transform 178ms, setup 143ms, import 268ms, tests 67ms, environment 924ms)[22m

