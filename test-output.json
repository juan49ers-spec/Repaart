{"numTotalTestSuites":7,"numPassedTestSuites":2,"numFailedTestSuites":5,"numPendingTestSuites":0,"numTotalTests":11,"numPassedTests":9,"numFailedTests":2,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1767891562666,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Scheduler Module","Zod Schemas"],"fullName":"Scheduler Module Zod Schemas should validate a correct WeekData object","status":"passed","title":"should validate a correct WeekData object","duration":3.1444999999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","Zod Schemas"],"fullName":"Scheduler Module Zod Schemas should fail with invalid date format","status":"passed","title":"should fail with invalid date format","duration":0.8238999999999805,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","Zod Schemas"],"fullName":"Scheduler Module Zod Schemas should enforce default values","status":"passed","title":"should enforce default values","duration":0.7917000000000485,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","getWeekId"],"fullName":"Scheduler Module WeekService getWeekId should correctly calculate ISO week for regular date","status":"passed","title":"should correctly calculate ISO week for regular date","duration":0.4662000000000148,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","getWeekId"],"fullName":"Scheduler Module WeekService getWeekId should handle year boundary correctly (late Dec)","status":"failed","title":"should handle year boundary correctly (late Dec)","duration":5.974800000000016,"failureMessages":["AssertionError: expected '2026_01' to be '2025_53' // Object.is equality\n    at C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/src/services/scheduler/weekService.test.ts:88:53\n    at file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)\n    at runTest (file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/runner/dist/index.js:1653:12)"],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","getWeekId"],"fullName":"Scheduler Module WeekService getWeekId should handle year boundary correctly (early Jan)","status":"passed","title":"should handle year boundary correctly (early Jan)","duration":0.2525999999999726,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","getWeek"],"fullName":"Scheduler Module WeekService getWeek should return validated data when document exists","status":"passed","title":"should return validated data when document exists","duration":1.38900000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","getWeek"],"fullName":"Scheduler Module WeekService getWeek should return null if document does not exist","status":"passed","title":"should return null if document does not exist","duration":0.24649999999996908,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","getWeek"],"fullName":"Scheduler Module WeekService getWeek should throw if data is invalid (Zod validation)","status":"passed","title":"should throw if data is invalid (Zod validation)","duration":1.6009000000000242,"failureMessages":[],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","initWeek"],"fullName":"Scheduler Module WeekService initWeek should create new week if not exists","status":"failed","title":"should create new week if not exists","duration":3.2423,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ Anything, ObjectContaining{â€¦} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   Anything,\u001b[90m\n\u001b[32m-   ObjectContaining {\u001b[90m\n\u001b[31m+   undefined,\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[2m      \"id\": \"2025_42\",\u001b[22m\n\u001b[31m+     \"metrics\": {\u001b[90m\n\u001b[31m+       \"activeRiders\": 0,\u001b[90m\n\u001b[31m+       \"motosInUse\": 0,\u001b[90m\n\u001b[31m+       \"totalHours\": 0,\u001b[90m\n\u001b[31m+     },\u001b[90m\n\u001b[31m+     \"shifts\": [],\u001b[90m\n\u001b[2m      \"startDate\": \"2025-10-13\",\u001b[22m\n\u001b[2m      \"status\": \"draft\",\u001b[22m\n\u001b[2m    },\u001b[22m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/chai/index.js:1700:25)\n    at C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/src/services/scheduler/weekService.test.ts:154:32\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Scheduler Module","WeekService","initWeek"],"fullName":"Scheduler Module WeekService initWeek should validation fail if trying to init with bad date","status":"passed","title":"should validation fail if trying to init with bad date","duration":0.507000000000005,"failureMessages":[],"meta":{}}],"startTime":1767891563279,"endTime":1767891563298.507,"status":"failed","message":"","name":"C:/Users/Usuario/.gemini/antigravity/playground/synthetic-sagan/src/services/scheduler/weekService.test.ts"}]}
